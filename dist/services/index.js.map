{"version":3,"sources":["services/index.js"],"names":["use","aclMiddleware","Users","send_push","Passwords","Login","UserConfirmation","UserDevices","UserWistikis","UserThreads","UserThreadMessages","UserMessages","FriendsWistiki","OwnerWistiki","PositionsWistiki","FoundsWistikis","FoundsWistikette","CallsWistikette","req","res","next","method","set","end","data","WistikiRecovery","Wistikis","Positions","Version","ApplicationKeys","Messages","Software","Models","Firmwares","debug","require"],"mappings":";;;;;;kBA+Be,YAAY;AACzB,SAAO,YAAY;AACjB,SAAKA,GAAL,CAAS,QAAT,EAAmBC,uBAAnB,EAAkCC,cAAlC,EACGF,GADH,CACO,oBADP,EAC6BG,mBAD7B,EAEGH,GAFH,CAEO,WAFP,EAEoBC,uBAFpB,EAEmCG,cAFnC,EAGGJ,GAHH,CAGO,QAHP,EAGiBC,uBAHjB,EAGgCI,eAHhC,EAIGL,GAJH,CAIO,4BAJP,EAIqCC,uBAJrC,EAIoDK,sBAJpD,EAKGN,GALH,CAKO,uBALP,EAKgCC,uBALhC,EAK+CM,iBAL/C,EAMGP,GANH,CAMO,wBANP,EAMiCC,uBANjC,EAMgDO,kBANhD,EAOGR,GAPH,CAOO,uBAPP,EAOgCC,uBAPhC,EAO+CQ,iBAP/C,EAQGT,GARH,CAQO,qCARP,EAQ8CC,uBAR9C,EAQ6DS,kBAR7D,EASGV,GATH,CASO,wBATP,EASiCC,uBATjC,EASgDU,kBAThD,EAUGX,GAVH,CAUO,uBAVP,EAUgCC,uBAVhC,EAU+CW,iBAV/C,EAWGZ,GAXH,CAWO,qBAXP,EAW8BC,uBAX9B,EAW6CY,eAX7C,EAYGb,GAZH,CAYO,yBAZP,EAYkCC,uBAZlC,EAYiDa,mBAZjD,EAaGd,GAbH,CAaO,sBAbP,EAa+BC,uBAb/B,EAa8Cc,gBAb9C,EAcGf,GAdH,CAcO,yBAdP,EAckCC,uBAdlC,EAciDe,gBAdjD,EAeGhB,GAfH,CAeO,wBAfP,EAeiCC,uBAfjC,EAegDgB,eAfhD,EAeiE,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjF,UAAIF,IAAIG,MAAJ,KAAe,KAAnB,EAA0B;AACxBF,YAAIG,GAAJ,CAAQ,cAAR,EAAwB,UAAxB;AACAH,YAAII,GAAJ,CAAQJ,IAAIK,IAAZ;AACD,OAHD,MAGO;AACLJ;AACD;AACF,KAtBH,EAuBGpB,GAvBH,CAuBO,wBAvBP,EAuBiCC,uBAvBjC,EAuBgDwB,kBAvBhD,EAwBGzB,GAxBH,CAwBO,WAxBP,EAwBoBC,uBAxBpB,EAwBmCyB,cAxBnC,EAyBG1B,GAzBH,CAyBO,UAzBP,EAyBmBC,uBAzBnB,EAyBkCM,iBAzBlC,EA0BGP,GA1BH,CA0BO,YA1BP,EA0BqBC,uBA1BrB,EA0BoC0B,eA1BpC,EA2BG3B,GA3BH,CA2BO,UA3BP,EA2BmB4B,iBA3BnB,EA4BG5B,GA5BH,CA4BO,4BA5BP,EA4BqCC,uBA5BrC,EA4BoD4B,cA5BpD,EA6BG7B,GA7BH,CA6BO,WA7BP,EA6BoBC,uBA7BpB,EA6BmC6B,eA7BnC;;AA+BE;AA/BF,KAgCG9B,GAhCH,CAgCO,YAhCP,EAgCqBC,uBAhCrB,EAgCoC8B,kBAhCpC,EAiCG/B,GAjCH,CAiCO,SAjCP,EAiCkBC,uBAjClB,EAiCiC+B,cAjCjC,EAkCGhC,GAlCH,CAkCO,YAlCP,EAkCqBC,uBAlCrB,EAkCoCgC,mBAlCpC;AAqCD,GAtCD;AAuCD,C;;AAvED;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMC,QAAQC,QAAQ,OAAR,EAAiB,iBAAjB,CAAd","file":"index.js","sourcesContent":["import Users from './users/root';\nimport Passwords from './password/root';\nimport UserWistikis from './users/wistikis';\nimport UserThreads from './users/threads';\nimport UserThreadMessages from './users/threads/messages';\nimport UserConfirmation from './users/confirmation';\n\nimport UserMessages from './users/messages';\nimport FoundsWistikis from './wistikis/founds';\nimport FoundsWistikette from './wistikette/founds';\nimport CallsWistikette from './wistikette/calls';\nimport Software from './software';\nimport Models from './models/root';\nimport UserDevices from './users/devices';\nimport Wistikis from './wistikis/root';\nimport Firmwares from './firmwares';\nimport FriendsWistiki from './wistikis/friends';\nimport OwnerWistiki from './wistikis/owner';\nimport PositionsWistiki from './wistikis/positions';\nimport WistikiRecovery from './wistikis/recovery';\nimport Positions from './positions/root';\nimport ApplicationKeys from './applications/keys';\nimport Messages from './messages/root';\n\nimport Login from './login';\nimport Version from './version';\nimport aclMiddleware from '../middlewares/aclMiddleware';\nimport send_push from './send_push';\n\nconst debug = require('debug')('darwin:services');\n\nexport default function () {\n  return function () {\n    this.use('/users', aclMiddleware, Users)\n      .use('/users/:email/ring', send_push)\n      .use('/password', aclMiddleware, Passwords)\n      .use('/login', aclMiddleware, Login)\n      .use('/users/:email/confirmation', aclMiddleware, UserConfirmation)\n      .use('/users/:email/devices', aclMiddleware, UserDevices)\n      .use('/users/:email/wistikis', aclMiddleware, UserWistikis)\n      .use('/users/:email/threads', aclMiddleware, UserThreads)\n      .use('/users/:email/threads/:tid/messages', aclMiddleware, UserThreadMessages)\n      .use('/users/:email/messages', aclMiddleware, UserMessages)\n      .use('/wistikis/:sn/friends', aclMiddleware, FriendsWistiki)\n      .use('/wistikis/:sn/owner', aclMiddleware, OwnerWistiki)\n      .use('/wistikis/:sn/positions', aclMiddleware, PositionsWistiki)\n      .use('/wistikis/:sn/founds', aclMiddleware, FoundsWistikis)\n      .use('/wistikettes/:sn/founds', aclMiddleware, FoundsWistikette)\n      .use('/wistikettes/:sn/calls', aclMiddleware, CallsWistikette, (req, res, next) => {\n        if (req.method === 'GET') {\n          res.set('Content-Type', 'text/xml');\n          res.end(res.data);\n        } else {\n          next();\n        }\n      })\n      .use('/wistikis/:sn/recovery', aclMiddleware, WistikiRecovery)\n      .use('/wistikis', aclMiddleware, Wistikis)\n      .use('/devices', aclMiddleware, UserDevices)\n      .use('/positions', aclMiddleware, Positions)\n      .use('/version', Version)\n      .use('/applications/:app_id/keys', aclMiddleware, ApplicationKeys)\n      .use('/messages', aclMiddleware, Messages)\n\n      // Todo later for admin role\n      .use('/softwares', aclMiddleware, Software)\n      .use('/models', aclMiddleware, Models)\n      .use('/firmwares', aclMiddleware, Firmwares);\n\n\n  };\n}\n"],"sourceRoot":"/opt/atlassian/pipelines/agent/build/src"}
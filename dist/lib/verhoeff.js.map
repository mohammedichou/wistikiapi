{"version":3,"sources":["lib/verhoeff.js"],"names":["d","p","inv","invArray","array","Object","prototype","toString","call","String","split","map","Number","reverse","generate","c","invertedArray","i","length","validate","module","exports"],"mappings":"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","file":"verhoeff.js","sourcesContent":["/*\n For more info on the algorithm: http://en.wikipedia.org/wiki/Verhoeff_algorithm\n by Sergey Petushkov, 2014\n */\n\n// multiplication table d\nvar d=[\n  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n  [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],\n  [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],\n  [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],\n  [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],\n  [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],\n  [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],\n  [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],\n  [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],\n  [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]\n];\n\n// permutation table p\nvar p=[\n  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n  [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],\n  [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],\n  [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],\n  [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],\n  [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],\n  [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],\n  [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]\n];\n\n// inverse table inv\nvar inv = [0, 4, 3, 2, 1, 5, 6, 7, 8, 9];\n\n// converts string or number to an array and inverts it\nfunction invArray(array){\n\n  if (Object.prototype.toString.call(array) == \"[object Number]\"){\n    array = String(array);\n  }\n\n  if (Object.prototype.toString.call(array) == \"[object String]\"){\n    array = array.split(\"\").map(Number);\n  }\n\n  return array.reverse();\n\n}\n\n// generates checksum\nfunction generate(array){\n\n  var c = 0;\n  var invertedArray = invArray(array);\n\n  for (var i = 0; i < invertedArray.length; i++){\n    c = d[c][p[((i + 1) % 8)][invertedArray[i]]];\n  }\n\n  return inv[c];\n}\n\n// validates checksum\nfunction validate(array) {\n\n  var c = 0;\n  var invertedArray = invArray(array);\n\n  for (var i = 0; i < invertedArray.length; i++){\n    c=d[c][p[(i % 8)][invertedArray[i]]];\n  }\n\n  return (c === 0);\n}\n\nmodule.exports = {\n  validate : validate,\n  generate : generate\n}\n"],"sourceRoot":"/opt/atlassian/pipelines/agent/build/src"}
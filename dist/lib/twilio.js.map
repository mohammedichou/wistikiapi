{"version":3,"sources":["lib/twilio.js"],"names":["debug","require","CallCenter","accountSid","authToken","_client","twilio","from","to","url","resolve","reject","calls","create","method","err","call","sid"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;AACA,IAAMA,QAAQC,QAAQ,OAAR,EAAiB,mBAAjB,CAAd;;IACMC,U;AACL,qBAAYC,UAAZ,EAAwBC,SAAxB,EAAkC;AAAA;;AACjC,OAAKC,OAAL,GAAe,IAAIC,gBAAJ,CAAWH,UAAX,EAAuBC,SAAvB,CAAf;AACA;;;;uBAEIG,I,EAAMC,E,EAAkD;AAAA;;AAAA,OAA9CC,GAA8C,uEAAxC,uCAAwC;;AAC5D,UAAO,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,UAAKN,OAAL,CAAaO,KAAb,CAAmBC,MAAnB,CAA0B;AACzBJ,UAAKA,GADoB;AAEzBD,SAAIA,EAFqB;AAGzBD,WAAMA,IAHmB;AAIzBO,aAAQ;AAJiB,KAA1B,EAKG,UAASC,GAAT,EAAcC,IAAd,EAAoB;;AAGtB,SAAGD,GAAH,EAAQ;AACPf,YAAM,OAAN,EAAee,GAAf;AACAJ,aAAOI,GAAP;AACA,MAHD,MAII;AACHf,YAAM,MAAN,EAAcgB,KAAKC,GAAnB;AACAP,cAAQM,IAAR;AACA;AAED,KAjBD;AAkBA,IAnBM,CAAP;AAqBA;;;;;kBAEad,U","file":"twilio.js","sourcesContent":["import twilio from 'twilio';\nconst debug = require('debug')('darwin:lib:twilio');\nclass CallCenter {\n\tconstructor(accountSid, authToken){\n\t\tthis._client = new twilio(accountSid, authToken);\n\t}\n\n\tcall(from, to, url = \"http://demo.twilio.com/docs/voice.xml\"){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._client.calls.create({\n\t\t\t\turl: url,\n\t\t\t\tto: to,\n\t\t\t\tfrom: from,\n\t\t\t\tmethod: 'GET'\n\t\t\t}, function(err, call) {\n\n\n\t\t\t\tif(err) {\n\t\t\t\t\tdebug(\"error\", err);\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tdebug(\"call\", call.sid);\n\t\t\t\t\tresolve(call);\n\t\t\t\t}\n\n\t\t\t});\n\t\t});\n\n\t}\n}\nexport default CallCenter;\n"],"sourceRoot":"/opt/atlassian/pipelines/agent/build/src"}
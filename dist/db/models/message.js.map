{"version":3,"sources":["db/models/message.js"],"names":["module","exports","sequelize","DataTypes","define","id","type","INTEGER","autoIncrement","primaryKey","body","TEXT","allowNull","date","DATE","user_email","STRING","references","model","key","thread_id","ENUM","defaultValue","underscored","freezeTableName","timestamps","createdAt","updatedAt","deletedAt","paranoid","hooks","beforeCreate","message","fn","utc"],"mappings":";;AAAA;;;;;;AAEAA,OAAOC,OAAP,GAAiB,UAAUC,SAAV,EAAqBC,SAArB,EAAgC;AAChD,QAAOD,UAAUE,MAAV,CAAiB,SAAjB,EAA4B;AACjCC,MAAI;AACHC,SAAMH,UAAUI,OAAV,CAAkB,EAAlB,CADH;AAEHC,kBAAe,IAFZ;AAGHC,eAAY;AAHT,GAD6B;AAMjCC,QAAM;AACLJ,SAAMH,UAAUQ,IADX;AAELC,cAAW;AAFN,GAN2B;AAUjCC,QAAM;AACLP,SAAMH,UAAUW,IADX;AAELF,cAAW;AAFN,GAV2B;AAcjCG,cAAY;AACXT,SAAMH,UAAUa,MADL;AAEXJ,cAAW,KAFA;AAGXK,eAAY;AACXC,WAAO,MADI;AAEXC,SAAK;AAFM;AAHD,GAdqB;AAsBjCC,aAAW;AACVd,SAAMH,UAAUI,OAAV,CAAkB,EAAlB,CADI;AAEVK,cAAW,KAFD;AAGVK,eAAY;AACXC,WAAO,QADI;AAEXC,SAAK;AAFM;AAHF,GAtBsB;AA8BlCb,QAAM;AACLA,SAAMH,UAAUkB,IAAV,CAAe,cAAf,EAA+B,SAA/B,CADD;AAELT,cAAW,IAFN;AAGLU,iBAAc;AAHT;AA9B4B,EAA5B,EAmCH;AACHC,eAAa,IADV;AAEFC,mBAAiB,IAFf;AAGFC,cAAY,KAHV;AAIHC,aAAW,MAJR;AAKFC,aAAW,KALT;AAMFC,aAAW,KANT;AAOHC,YAAU,KAPP;AAQHC,SAAO;AACNC,iBAAc,sBAAUC,OAAV,EAAmBC,EAAnB,EAAuB;AACpCD,YAAQnB,IAAR,GAAe,wBAASqB,GAAT,EAAf;AACA;AAHK;AARJ,EAnCG,CAAP;AAkDA,CAnDD","file":"message.js","sourcesContent":["import moment from 'moment';\n\nmodule.exports = function (sequelize, DataTypes) {\n\treturn sequelize.define('message', {\n\t\t\tid: {\n\t\t\t\ttype: DataTypes.INTEGER(10),\n\t\t\t\tautoIncrement: true,\n\t\t\t\tprimaryKey: true\n\t\t\t},\n\t\t\tbody: {\n\t\t\t\ttype: DataTypes.TEXT,\n\t\t\t\tallowNull: false\n\t\t\t},\n\t\t\tdate: {\n\t\t\t\ttype: DataTypes.DATE,\n\t\t\t\tallowNull: true\n\t\t\t},\n\t\t\tuser_email: {\n\t\t\t\ttype: DataTypes.STRING,\n\t\t\t\tallowNull: false,\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: 'user',\n\t\t\t\t\tkey: 'email'\n\t\t\t\t}\n\t\t\t},\n\t\t\tthread_id: {\n\t\t\t\ttype: DataTypes.INTEGER(10),\n\t\t\t\tallowNull: false,\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: 'thread',\n\t\t\t\t\tkey: 'id'\n\t\t\t\t}\n\t\t\t},\n\t\ttype: {\n\t\t\ttype: DataTypes.ENUM('NOTIFICATION', 'MESSAGE'),\n\t\t\tallowNull: true,\n\t\t\tdefaultValue: 'MESSAGE'\n\t\t\t}\n\t\t}, {\n\t\tunderscored: true,\n\t\t\tfreezeTableName: true,\n\t\t\ttimestamps: false,\n\t\tcreatedAt: 'date',\n\t\t\tupdatedAt: false,\n\t\t\tdeletedAt: false,\n\t\tparanoid: false,\n\t\thooks: {\n\t\t\tbeforeCreate: function (message, fn) {\n\t\t\t\tmessage.date = moment().utc();\n\t\t\t}\n\t\t}\n\t\t}\n\t)\n};\n"],"sourceRoot":"/opt/atlassian/pipelines/agent/build/src"}
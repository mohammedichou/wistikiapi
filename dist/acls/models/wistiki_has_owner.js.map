{"version":3,"sources":["acls/models/wistiki_has_owner.js"],"names":["DeviceModelPermission","acl","allow","user","wistiki_has_owners","resolve","reject","wistikiHasOwnerModel","email","user_email","wistiki_has_owner","get","Permission"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqBA,qB;;;AACnB,iCAAYC,GAAZ,EAAiB;AAAA;AAAA,+JACTA,GADS,EACJ,mBADI,EACiB,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,QAA5B,EAAsC,MAAtC,CADjB;AAEhB;;;;4BAEO;AAAA;;AACN,WAAKC,KAAL,CAAW,MAAX,EAAmB,CAAC,QAAD,CAAnB,EAA+B,UAACC,IAAD,EAAOC,kBAAP;AAAA,eAA8B,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC5FD;AACD,SAF4D,CAA9B;AAAA,OAA/B;;AAIA,WAAKH,KAAL,CAAW,MAAX,EAAmB,CAAC,QAAD,CAAnB;AAAA,4FAA+B,iBAAOC,IAAP,EAAaI,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA,wBACzBJ,KAAKK,KAAL,KAAeD,qBAAqBE,UADX;AAAA;AAAA;AAAA;;AAAA,mDAEpB,kBAAQJ,OAAR,EAFoB;;AAAA;AAAA,mDAItB,kBAAQC,MAAR,EAJsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA/B;;AAAA;AAAA;AAAA;AAAA;;AAOA,WAAKJ,KAAL,CAAW,MAAX,EAAmB,CAAC,QAAD,CAAnB,EAA+B,UAACC,IAAD,EAAOO,iBAAP;AAAA,eAA6B,sBAAY,UAACL,OAAD,EAAUC,MAAV,EAAqB;AAC3F,cAAIH,KAAKK,KAAL,IAAcE,kBAAkBC,GAAlB,CAAsB,YAAtB,CAAlB,EAAuD;AACrD,mBAAON,SAAP;AACD;AACDC;AACD,SAL2D,CAA7B;AAAA,OAA/B;AAMD;;;EAvBgDM,oB;;kBAA9BZ,qB","file":"wistiki_has_owner.js","sourcesContent":["import Permission from '../permission';\n\nexport default class DeviceModelPermission extends Permission {\n  constructor(acl) {\n    super(acl, 'wistiki_has_owner', ['get', 'create', 'update', 'remove', 'find']);\n  }\n\n  build() {\n    this.allow('user', ['create'], (user, wistiki_has_owners) => new Promise((resolve, reject) => {\n      resolve();\n    }));\n\n    this.allow('user', ['update'], async (user, wistikiHasOwnerModel) => {\n      if (user.email === wistikiHasOwnerModel.user_email) {\n        return Promise.resolve();\n      }\n      return Promise.reject();\n    });\n\n    this.allow('user', ['remove'], (user, wistiki_has_owner) => new Promise((resolve, reject) => {\n      if (user.email == wistiki_has_owner.get('user_email')) {\n        return resolve();\n      }\n      reject();\n    }));\n  }\n}\n\n"],"sourceRoot":"/opt/atlassian/pipelines/agent/build/src"}
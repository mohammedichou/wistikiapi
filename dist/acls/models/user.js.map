{"version":3,"sources":["acls/models/user.js"],"names":["UserPermission","acl","allow","user","model","resolve","reject","email","Permission"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;IAEqBA,c;;;AACnB,0BAAYC,GAAZ,EAAiB;AAAA;AAAA,iJACTA,GADS,EACJ,MADI,EACI,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,EAA4B,QAA5B,EAAsC,MAAtC,EAA8C,eAA9C,EAA+D,cAA/D,CADJ;AAEhB;;;;4BAEO;AACN,WAAKC,KAAL,CAAW,WAAX,EAAwB,QAAxB;AACA,WAAKA,KAAL,CAAW,MAAX,EAAmB,CAAC,KAAD,EAAQ,QAAR,EAAkB,eAAlB,EAAmC,cAAnC,CAAnB,EAAuE,UAACC,IAAD,EAAOC,KAAP;AAAA,eAAiB,sBAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvH,cAAI,CAACH,IAAL,EAAW;AACT,mBAAOG,QAAP;AACD;AACD,cAAIH,KAAKI,KAAL,KAAeH,MAAMG,KAAzB,EAAgC;AAC9B,mBAAOF,SAAP;AACD;AACD,iBAAOC,QAAP;AACD,SARuF,CAAjB;AAAA,OAAvE;AASD;;;EAhByCE,oB;;kBAAvBR,c","file":"user.js","sourcesContent":["import Permission from '../permission';\n\nexport default class UserPermission extends Permission {\n  constructor(acl) {\n    super(acl, 'user', ['get', 'create', 'update', 'remove', 'find', 'find_messages', 'find_threads']);\n  }\n\n  build() {\n    this.allow('anonymous', 'create');\n    this.allow('user', ['get', 'update', 'find_messages', 'find_threads'], (user, model) => new Promise((resolve, reject) => {\n      if (!user) {\n        return reject();\n      }\n      if (user.email === model.email) {\n        return resolve();\n      }\n      return reject();\n    }));\n  }\n}\n\n"],"sourceRoot":"/opt/atlassian/pipelines/agent/build/src"}